"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "components_map_SharedMapComponent_tsx";
exports.ids = ["components_map_SharedMapComponent_tsx"];
exports.modules = {

/***/ "./components/map/SharedMapComponent.tsx":
/*!***********************************************!*\
  !*** ./components/map/SharedMapComponent.tsx ***!
  \***********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _context_AuthContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../context/AuthContext */ \"./context/AuthContext.tsx\");\n/* harmony import */ var react_leaflet__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-leaflet */ \"react-leaflet\");\n/* harmony import */ var leaflet__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! leaflet */ \"leaflet\");\n/* harmony import */ var leaflet__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(leaflet__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var leaflet_dist_leaflet_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! leaflet/dist/leaflet.css */ \"./node_modules/leaflet/dist/leaflet.css\");\n/* harmony import */ var leaflet_dist_leaflet_css__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(leaflet_dist_leaflet_css__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _FilterButtons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./FilterButtons */ \"./components/map/FilterButtons.tsx\");\n/* harmony import */ var _SearchBar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./SearchBar */ \"./components/map/SearchBar.tsx\");\n/* harmony import */ var _ContextWindowPlaceholder__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ContextWindowPlaceholder */ \"./components/map/ContextWindowPlaceholder.tsx\");\n/* harmony import */ var _styles_MapPage_module_css__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../styles/MapPage.module.css */ \"./styles/MapPage.module.css\");\n/* harmony import */ var _styles_MapPage_module_css__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_styles_MapPage_module_css__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var leaflet_dist_images_marker_icon_2x_png__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! leaflet/dist/images/marker-icon-2x.png */ \"./node_modules/leaflet/dist/images/marker-icon-2x.png\");\n/* harmony import */ var leaflet_dist_images_marker_icon_png__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! leaflet/dist/images/marker-icon.png */ \"./node_modules/leaflet/dist/images/marker-icon.png\");\n/* harmony import */ var leaflet_dist_images_marker_shadow_png__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! leaflet/dist/images/marker-shadow.png */ \"./node_modules/leaflet/dist/images/marker-shadow.png\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_leaflet__WEBPACK_IMPORTED_MODULE_3__, axios__WEBPACK_IMPORTED_MODULE_5__]);\n([react_leaflet__WEBPACK_IMPORTED_MODULE_3__, axios__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n // Added MutableRefObject\n // Import useAuth\n\n // Added Map type\n\n\n // Import the new filter buttons\n // Import the search bar\n // Import the placeholder\n // Import CSS module for styling\n// Fix for default marker icon issue\n\n\n\ndelete (leaflet__WEBPACK_IMPORTED_MODULE_4___default().Icon).Default.prototype._getIconUrl;\nleaflet__WEBPACK_IMPORTED_MODULE_4___default().Icon.Default.mergeOptions({\n    iconRetinaUrl: leaflet_dist_images_marker_icon_2x_png__WEBPACK_IMPORTED_MODULE_11__[\"default\"].src,\n    iconUrl: leaflet_dist_images_marker_icon_png__WEBPACK_IMPORTED_MODULE_12__[\"default\"].src,\n    shadowUrl: leaflet_dist_images_marker_shadow_png__WEBPACK_IMPORTED_MODULE_13__[\"default\"].src\n});\n// --- Helper Functions (Keep existing getIconForSource) ---\nfunction getIconForSource(source) {\n    return new (leaflet__WEBPACK_IMPORTED_MODULE_4___default().Icon)({\n        iconUrl: leaflet_dist_images_marker_icon_png__WEBPACK_IMPORTED_MODULE_12__[\"default\"].src,\n        iconRetinaUrl: leaflet_dist_images_marker_icon_2x_png__WEBPACK_IMPORTED_MODULE_11__[\"default\"].src,\n        shadowUrl: leaflet_dist_images_marker_shadow_png__WEBPACK_IMPORTED_MODULE_13__[\"default\"].src,\n        iconSize: [\n            25,\n            41\n        ],\n        iconAnchor: [\n            12,\n            41\n        ],\n        popupAnchor: [\n            1,\n            -34\n        ],\n        shadowSize: [\n            41,\n            41\n        ]\n    });\n}\n// --- Component ---\nconst defaultCenter = [\n    51.505,\n    -0.09\n];\nconst defaultZoom = 13;\nconst SharedMapComponent = ({ tileLayerInfo, mapRef })=>{\n    const [markers, setMarkers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [footprints, setFootprints] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const { isGuest } = (0,_context_AuthContext__WEBPACK_IMPORTED_MODULE_2__.useAuth)(); // Get guest status\n    const guestViewportKey = \"guestMapViewport\"; // Key for center/zoom\n    const guestStyleKey = \"guestMapStyleId\"; // Key for style ID\n    // Effect to load map VIEWPORT state for guests from sessionStorage\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isGuest && mapRef.current) {\n            const savedViewportRaw = sessionStorage.getItem(guestViewportKey);\n            if (savedViewportRaw) {\n                try {\n                    const savedViewport = JSON.parse(savedViewportRaw);\n                    if (savedViewport.center && savedViewport.zoom) {\n                        mapRef.current.setView(savedViewport.center, savedViewport.zoom);\n                        logger.debug(\"Restored guest map viewport from sessionStorage:\", savedViewport);\n                    }\n                // Style is loaded elsewhere (e.g., LayersMenu or parent page)\n                } catch (e) {\n                    logger.error(\"Failed to parse guest map viewport from sessionStorage\", e);\n                    sessionStorage.removeItem(guestViewportKey); // Clear corrupted data\n                }\n            }\n        }\n    // Dependency array includes mapRef.current to re-run if the map initializes later,\n    // and isGuest to run when guest status is confirmed.\n    }, [\n        isGuest,\n        mapRef.current\n    ]);\n    // Effect to save map VIEWPORT state for guests to sessionStorage\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const map = mapRef.current;\n        if (isGuest && map) {\n            const saveViewportState = ()=>{\n                const center = map.getCenter();\n                const zoom = map.getZoom();\n                const viewportToSave = {\n                    center: {\n                        lat: center.lat,\n                        lng: center.lng\n                    },\n                    zoom: zoom\n                };\n                try {\n                    sessionStorage.setItem(guestViewportKey, JSON.stringify(viewportToSave));\n                    logger.debug(\"Saved guest map viewport to sessionStorage:\", viewportToSave);\n                } catch (e) {\n                    logger.error(\"Failed to save guest map viewport to sessionStorage\", e);\n                }\n            };\n            map.on(\"moveend\", saveViewportState);\n            map.on(\"zoomend\", saveViewportState);\n            // Cleanup listeners\n            return ()=>{\n                map.off(\"moveend\", saveViewportState);\n                map.off(\"zoomend\", saveViewportState);\n            };\n        } else if (!isGuest) {\n            // If user logs in, clear guest state\n            sessionStorage.removeItem(guestViewportKey);\n            sessionStorage.removeItem(guestStyleKey); // Also clear style key\n        }\n    // Dependencies: Run when guest status changes or map instance is ready\n    }, [\n        isGuest,\n        mapRef.current\n    ]);\n    // Effect to save map STYLE state for guests to sessionStorage\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Only save if guest and tileLayerInfo.id is valid\n        if (isGuest && tileLayerInfo?.id) {\n            try {\n                sessionStorage.setItem(guestStyleKey, tileLayerInfo.id);\n                logger.debug(\"Saved guest map style ID to sessionStorage:\", tileLayerInfo.id);\n            } catch (e) {\n                logger.error(\"Failed to save guest map style ID to sessionStorage\", e);\n            }\n        }\n    // Dependencies: Run when guest status changes or the tileLayerInfo prop changes\n    }, [\n        isGuest,\n        tileLayerInfo\n    ]);\n    // Data fetching logic (Keep existing useEffect)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const fetchMapData = async ()=>{\n            setIsLoading(true);\n            setError(null);\n            setMarkers([]);\n            setFootprints([]);\n            try {\n                const response = await axios__WEBPACK_IMPORTED_MODULE_5__[\"default\"].get(\"/api/mapdata\");\n                // Process Markers\n                if (response.data?.markers) {\n                    const fetchedMarkers = response.data.markers.map((m)=>({\n                            id: m.id,\n                            position: m.position,\n                            popupContent: m.popupContent,\n                            source: m.source\n                        }));\n                    setMarkers(fetchedMarkers);\n                    logger.debug(`Successfully fetched ${fetchedMarkers.length} markers.`);\n                } else {\n                    logger.warn(\"No marker data found in response.\");\n                    setMarkers([]);\n                }\n                // Process Footprints\n                if (response.data?.footprints) {\n                    const fetchedFootprints = response.data.footprints.filter((f)=>f.type === \"Feature\" && f.geometry?.type === \"Polygon\" && Array.isArray(f.geometry.coordinates));\n                    setFootprints(fetchedFootprints);\n                    logger.debug(`Successfully fetched ${fetchedFootprints.length} footprints.`);\n                } else {\n                    logger.warn(\"No footprint data found in response.\");\n                    setFootprints([]);\n                }\n                if (!response.data?.markers && !response.data?.footprints) {\n                    // Keep this check, but maybe soften the error if one type exists but not the other\n                    logger.warn(\"No marker or footprint data found in response.\");\n                // throw new Error(\"Invalid or empty data format received from /api/mapdata\");\n                }\n            } catch (err) {\n                logger.error(\"Failed to fetch map data:\", err);\n                setError(err.message || \"Could not load map data.\");\n            } finally{\n                setIsLoading(false);\n            }\n        };\n        fetchMapData();\n    }, []);\n    // REMOVED: Internal theme state (isDarkMode) and toggle button\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            flexGrow: 1,\n            position: \"relative\",\n            width: \"100%\",\n            height: \"100%\"\n        },\n        children: [\n             false && /*#__PURE__*/ 0,\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: (_styles_MapPage_module_css__WEBPACK_IMPORTED_MODULE_10___default().mapControlsOverlay),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_FilterButtons__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {}, void 0, false, {\n                        fileName: \"F:\\\\Selkie\\\\Project\\\\frontend\\\\components\\\\map\\\\SharedMapComponent.tsx\",\n                        lineNumber: 262,\n                        columnNumber: 17\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_SearchBar__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {}, void 0, false, {\n                        fileName: \"F:\\\\Selkie\\\\Project\\\\frontend\\\\components\\\\map\\\\SharedMapComponent.tsx\",\n                        lineNumber: 263,\n                        columnNumber: 17\n                    }, undefined),\n                    \" \",\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ContextWindowPlaceholder__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {}, void 0, false, {\n                        fileName: \"F:\\\\Selkie\\\\Project\\\\frontend\\\\components\\\\map\\\\SharedMapComponent.tsx\",\n                        lineNumber: 264,\n                        columnNumber: 17\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"F:\\\\Selkie\\\\Project\\\\frontend\\\\components\\\\map\\\\SharedMapComponent.tsx\",\n                lineNumber: 261,\n                columnNumber: 13\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"F:\\\\Selkie\\\\Project\\\\frontend\\\\components\\\\map\\\\SharedMapComponent.tsx\",\n        lineNumber: 208,\n        columnNumber: 9\n    }, undefined);\n};\n// Keep logger instance\nconst logger = {\n    error: (...args)=>console.error(...args),\n    debug: (...args)=>console.log(...args),\n    warn: (...args)=>console.warn(...args)\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SharedMapComponent);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJLEVBQUV0QyxZQUFZO29CQUN0RCxtRkFBbUY7b0JBQ25GbUIsT0FBT3lCLElBQUksQ0FBQztnQkFDWiw4RUFBOEU7Z0JBQ25GO1lBRUosRUFBRSxPQUFPUyxLQUFVO2dCQUNmbEMsT0FBT2YsS0FBSyxDQUFDLDZCQUE2QmlEO2dCQUMxQ2hELFNBQVNnRCxJQUFJQyxPQUFPLElBQUk7WUFDNUIsU0FBVTtnQkFDTm5ELGFBQWE7WUFDakI7UUFDSjtRQUVBZ0M7SUFDSixHQUFHLEVBQUU7SUFFTCwrREFBK0Q7SUFFL0QscUJBQ0ksOERBQUNvQjtRQUFJQyxPQUFPO1lBQUVDLFVBQVU7WUFBR2hCLFVBQVU7WUFBWWlCLE9BQU87WUFBUUMsUUFBUTtRQUFPOztZQUN6RSxNQUFrQixrQkFDaEI7MEJBbURKLDhEQUFDSjtnQkFBSXdCLFdBQVd0Ryx1RkFBeUI7O2tDQUNyQyw4REFBQ0gsc0RBQWFBOzs7OztrQ0FDZCw4REFBQ0Msa0RBQVNBOzs7OztvQkFBRztrQ0FDYiw4REFBQ0MsaUVBQXdCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJekM7QUFFQSx1QkFBdUI7QUFDdkIsTUFBTTJDLFNBQVM7SUFDWGYsT0FBTyxDQUFDLEdBQUc2RSxPQUFnQkMsUUFBUTlFLEtBQUssSUFBSTZFO0lBQzVDN0QsT0FBTyxDQUFDLEdBQUc2RCxPQUFnQkMsUUFBUUMsR0FBRyxJQUFJRjtJQUMxQ3JDLE1BQU0sQ0FBQyxHQUFHcUMsT0FBZ0JDLFFBQVF0QyxJQUFJLElBQUlxQztBQUM5QztBQUVBLGlFQUFldEYsa0JBQWtCQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Vsa2llLWZyb250ZW5kLy4vY29tcG9uZW50cy9tYXAvU2hhcmVkTWFwQ29tcG9uZW50LnRzeD9jOGMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCBNdXRhYmxlUmVmT2JqZWN0IH0gZnJvbSAncmVhY3QnOyAvLyBBZGRlZCBNdXRhYmxlUmVmT2JqZWN0XHJcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICcuLi8uLi9jb250ZXh0L0F1dGhDb250ZXh0JzsgLy8gSW1wb3J0IHVzZUF1dGhcclxuaW1wb3J0IHsgTWFwQ29udGFpbmVyLCBUaWxlTGF5ZXIsIE1hcmtlciwgUG9wdXAsIFBvbHlnb24gfSBmcm9tICdyZWFjdC1sZWFmbGV0JztcclxuaW1wb3J0IEwsIHsgTWFwIH0gZnJvbSAnbGVhZmxldCc7IC8vIEFkZGVkIE1hcCB0eXBlXHJcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XHJcbmltcG9ydCAnbGVhZmxldC9kaXN0L2xlYWZsZXQuY3NzJztcclxuaW1wb3J0IHsgU3R5bGVPcHRpb24gfSBmcm9tICcuL0xheWVyc01lbnUnOyAvLyBJbXBvcnQgU3R5bGVPcHRpb24gdHlwZVxyXG5pbXBvcnQgRmlsdGVyQnV0dG9ucyBmcm9tICcuL0ZpbHRlckJ1dHRvbnMnOyAvLyBJbXBvcnQgdGhlIG5ldyBmaWx0ZXIgYnV0dG9uc1xyXG5pbXBvcnQgU2VhcmNoQmFyIGZyb20gJy4vU2VhcmNoQmFyJzsgLy8gSW1wb3J0IHRoZSBzZWFyY2ggYmFyXHJcbmltcG9ydCBDb250ZXh0V2luZG93UGxhY2Vob2xkZXIgZnJvbSAnLi9Db250ZXh0V2luZG93UGxhY2Vob2xkZXInOyAvLyBJbXBvcnQgdGhlIHBsYWNlaG9sZGVyXHJcbmltcG9ydCBzdHlsZXMgZnJvbSAnLi4vLi4vc3R5bGVzL01hcFBhZ2UubW9kdWxlLmNzcyc7IC8vIEltcG9ydCBDU1MgbW9kdWxlIGZvciBzdHlsaW5nXHJcbi8vIEZpeCBmb3IgZGVmYXVsdCBtYXJrZXIgaWNvbiBpc3N1ZVxyXG5pbXBvcnQgaWNvblJldGluYVVybCBmcm9tICdsZWFmbGV0L2Rpc3QvaW1hZ2VzL21hcmtlci1pY29uLTJ4LnBuZyc7XHJcbmltcG9ydCBpY29uVXJsIGZyb20gJ2xlYWZsZXQvZGlzdC9pbWFnZXMvbWFya2VyLWljb24ucG5nJztcclxuaW1wb3J0IHNoYWRvd1VybCBmcm9tICdsZWFmbGV0L2Rpc3QvaW1hZ2VzL21hcmtlci1zaGFkb3cucG5nJztcclxuXHJcbmRlbGV0ZSAoTC5JY29uLkRlZmF1bHQucHJvdG90eXBlIGFzIGFueSkuX2dldEljb25Vcmw7XHJcbkwuSWNvbi5EZWZhdWx0Lm1lcmdlT3B0aW9ucyh7XHJcbiAgICBpY29uUmV0aW5hVXJsOiBpY29uUmV0aW5hVXJsLnNyYyxcclxuICAgIGljb25Vcmw6IGljb25Vcmwuc3JjLFxyXG4gICAgc2hhZG93VXJsOiBzaGFkb3dVcmwuc3JjLFxyXG59KTtcclxuXHJcbi8vIC0tLSBJbnRlcmZhY2VzIChLZWVwIGV4aXN0aW5nIE1hcE1hcmtlckRhdGEsIE1hcEZvb3RwcmludERhdGEpIC0tLVxyXG5pbnRlcmZhY2UgTWFwTWFya2VyRGF0YSB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgcG9zaXRpb246IFtudW1iZXIsIG51bWJlcl07XHJcbiAgICBwb3B1cENvbnRlbnQ6IHN0cmluZztcclxuICAgIHNvdXJjZT86ICdrYXBwYScgfCAnZGppbm4nIHwgJ2dob3N0JyB8ICd0ZXNzZXJhY3QnIHwgJ3Rlc3QnO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgTWFwRm9vdHByaW50RGF0YSB7XHJcbiAgICB0eXBlOiBcIkZlYXR1cmVcIjtcclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBzY2VuZV9pZDogc3RyaW5nO1xyXG4gICAgICAgIG5hbWU/OiBzdHJpbmc7XHJcbiAgICAgICAgc291cmNlOiAndGVzc2VyYWN0JztcclxuICAgICAgICBba2V5OiBzdHJpbmddOiBhbnk7XHJcbiAgICB9O1xyXG4gICAgZ2VvbWV0cnk6IHtcclxuICAgICAgICB0eXBlOiBcIlBvbHlnb25cIjtcclxuICAgICAgICBjb29yZGluYXRlczogbnVtYmVyW11bXVtdO1xyXG4gICAgfTtcclxufVxyXG5cclxuLy8gLS0tIFByb3BzIEludGVyZmFjZSAtLS1cclxuaW50ZXJmYWNlIFNoYXJlZE1hcENvbXBvbmVudFByb3BzIHtcclxuICAgIHRpbGVMYXllckluZm86IFN0eWxlT3B0aW9uOyAvLyBSZWNlaXZlIHNlbGVjdGVkIHN0eWxlIGluZm8gZnJvbSBwYXJlbnRcclxuICAgIC8vIGlkOiBzdHJpbmc7IC8vIFJlbW92ZWQgLSBJRCBpcyBhY2Nlc3NlZCB2aWEgdGlsZUxheWVySW5mby5pZFxyXG4gICAgbWFwUmVmOiBNdXRhYmxlUmVmT2JqZWN0PE1hcCB8IG51bGw+OyAvLyBSZWNlaXZlIHJlZiBmcm9tIHBhcmVudFxyXG59XHJcblxyXG4vLyAtLS0gSGVscGVyIEZ1bmN0aW9ucyAoS2VlcCBleGlzdGluZyBnZXRJY29uRm9yU291cmNlKSAtLS1cclxuZnVuY3Rpb24gZ2V0SWNvbkZvclNvdXJjZShzb3VyY2U/OiBNYXBNYXJrZXJEYXRhWydzb3VyY2UnXSk6IEwuSWNvbiB7XHJcbiAgICByZXR1cm4gbmV3IEwuSWNvbih7XHJcbiAgICAgICAgaWNvblVybDogaWNvblVybC5zcmMsXHJcbiAgICAgICAgaWNvblJldGluYVVybDogaWNvblJldGluYVVybC5zcmMsXHJcbiAgICAgICAgc2hhZG93VXJsOiBzaGFkb3dVcmwuc3JjLFxyXG4gICAgICAgIGljb25TaXplOiBbMjUsIDQxXSxcclxuICAgICAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSxcclxuICAgICAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXHJcbiAgICAgICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyAtLS0gQ29tcG9uZW50IC0tLVxyXG5jb25zdCBkZWZhdWx0Q2VudGVyOiBbbnVtYmVyLCBudW1iZXJdID0gWzUxLjUwNSwgLTAuMDldO1xyXG5jb25zdCBkZWZhdWx0Wm9vbSA9IDEzO1xyXG5cclxuY29uc3QgU2hhcmVkTWFwQ29tcG9uZW50OiBSZWFjdC5GQzxTaGFyZWRNYXBDb21wb25lbnRQcm9wcz4gPSAoeyB0aWxlTGF5ZXJJbmZvLCBtYXBSZWYgfSkgPT4ge1xyXG4gICAgY29uc3QgW21hcmtlcnMsIHNldE1hcmtlcnNdID0gdXNlU3RhdGU8TWFwTWFya2VyRGF0YVtdPihbXSk7XHJcbiAgICBjb25zdCBbZm9vdHByaW50cywgc2V0Rm9vdHByaW50c10gPSB1c2VTdGF0ZTxNYXBGb290cHJpbnREYXRhW10+KFtdKTtcclxuICAgIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XHJcbiAgICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG5cclxuICAgIGNvbnN0IHsgaXNHdWVzdCB9ID0gdXNlQXV0aCgpOyAvLyBHZXQgZ3Vlc3Qgc3RhdHVzXHJcbiAgICBjb25zdCBndWVzdFZpZXdwb3J0S2V5ID0gJ2d1ZXN0TWFwVmlld3BvcnQnOyAvLyBLZXkgZm9yIGNlbnRlci96b29tXHJcbiAgICBjb25zdCBndWVzdFN0eWxlS2V5ID0gJ2d1ZXN0TWFwU3R5bGVJZCc7IC8vIEtleSBmb3Igc3R5bGUgSURcclxuXHJcbiAgICAvLyBFZmZlY3QgdG8gbG9hZCBtYXAgVklFV1BPUlQgc3RhdGUgZm9yIGd1ZXN0cyBmcm9tIHNlc3Npb25TdG9yYWdlXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGlmIChpc0d1ZXN0ICYmIG1hcFJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNhdmVkVmlld3BvcnRSYXcgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGd1ZXN0Vmlld3BvcnRLZXkpO1xyXG4gICAgICAgICAgICBpZiAoc2F2ZWRWaWV3cG9ydFJhdykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzYXZlZFZpZXdwb3J0ID0gSlNPTi5wYXJzZShzYXZlZFZpZXdwb3J0UmF3KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2F2ZWRWaWV3cG9ydC5jZW50ZXIgJiYgc2F2ZWRWaWV3cG9ydC56b29tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcFJlZi5jdXJyZW50LnNldFZpZXcoc2F2ZWRWaWV3cG9ydC5jZW50ZXIsIHNhdmVkVmlld3BvcnQuem9vbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUmVzdG9yZWQgZ3Vlc3QgbWFwIHZpZXdwb3J0IGZyb20gc2Vzc2lvblN0b3JhZ2U6Jywgc2F2ZWRWaWV3cG9ydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFN0eWxlIGlzIGxvYWRlZCBlbHNld2hlcmUgKGUuZy4sIExheWVyc01lbnUgb3IgcGFyZW50IHBhZ2UpXHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gcGFyc2UgZ3Vlc3QgbWFwIHZpZXdwb3J0IGZyb20gc2Vzc2lvblN0b3JhZ2UnLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGd1ZXN0Vmlld3BvcnRLZXkpOyAvLyBDbGVhciBjb3JydXB0ZWQgZGF0YVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERlcGVuZGVuY3kgYXJyYXkgaW5jbHVkZXMgbWFwUmVmLmN1cnJlbnQgdG8gcmUtcnVuIGlmIHRoZSBtYXAgaW5pdGlhbGl6ZXMgbGF0ZXIsXHJcbiAgICAgICAgLy8gYW5kIGlzR3Vlc3QgdG8gcnVuIHdoZW4gZ3Vlc3Qgc3RhdHVzIGlzIGNvbmZpcm1lZC5cclxuICAgIH0sIFtpc0d1ZXN0LCBtYXBSZWYuY3VycmVudF0pO1xyXG5cclxuICAgIC8vIEVmZmVjdCB0byBzYXZlIG1hcCBWSUVXUE9SVCBzdGF0ZSBmb3IgZ3Vlc3RzIHRvIHNlc3Npb25TdG9yYWdlXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1hcCA9IG1hcFJlZi5jdXJyZW50O1xyXG4gICAgICAgIGlmIChpc0d1ZXN0ICYmIG1hcCkge1xyXG4gICAgICAgICAgICBjb25zdCBzYXZlVmlld3BvcnRTdGF0ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IG1hcC5nZXRDZW50ZXIoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHpvb20gPSBtYXAuZ2V0Wm9vbSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgdmlld3BvcnRUb1NhdmUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyOiB7IGxhdDogY2VudGVyLmxhdCwgbG5nOiBjZW50ZXIubG5nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgem9vbTogem9vbSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oZ3Vlc3RWaWV3cG9ydEtleSwgSlNPTi5zdHJpbmdpZnkodmlld3BvcnRUb1NhdmUpKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1NhdmVkIGd1ZXN0IG1hcCB2aWV3cG9ydCB0byBzZXNzaW9uU3RvcmFnZTonLCB2aWV3cG9ydFRvU2F2ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBndWVzdCBtYXAgdmlld3BvcnQgdG8gc2Vzc2lvblN0b3JhZ2UnLCBlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIG1hcC5vbignbW92ZWVuZCcsIHNhdmVWaWV3cG9ydFN0YXRlKTtcclxuICAgICAgICAgICAgbWFwLm9uKCd6b29tZW5kJywgc2F2ZVZpZXdwb3J0U3RhdGUpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2xlYW51cCBsaXN0ZW5lcnNcclxuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG1hcC5vZmYoJ21vdmVlbmQnLCBzYXZlVmlld3BvcnRTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBtYXAub2ZmKCd6b29tZW5kJywgc2F2ZVZpZXdwb3J0U3RhdGUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIWlzR3Vlc3QpIHtcclxuICAgICAgICAgICAgIC8vIElmIHVzZXIgbG9ncyBpbiwgY2xlYXIgZ3Vlc3Qgc3RhdGVcclxuICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oZ3Vlc3RWaWV3cG9ydEtleSk7XHJcbiAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGd1ZXN0U3R5bGVLZXkpOyAvLyBBbHNvIGNsZWFyIHN0eWxlIGtleVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBEZXBlbmRlbmNpZXM6IFJ1biB3aGVuIGd1ZXN0IHN0YXR1cyBjaGFuZ2VzIG9yIG1hcCBpbnN0YW5jZSBpcyByZWFkeVxyXG4gICAgfSwgW2lzR3Vlc3QsIG1hcFJlZi5jdXJyZW50XSk7XHJcblxyXG4gICAgLy8gRWZmZWN0IHRvIHNhdmUgbWFwIFNUWUxFIHN0YXRlIGZvciBndWVzdHMgdG8gc2Vzc2lvblN0b3JhZ2VcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgLy8gT25seSBzYXZlIGlmIGd1ZXN0IGFuZCB0aWxlTGF5ZXJJbmZvLmlkIGlzIHZhbGlkXHJcbiAgICAgICAgaWYgKGlzR3Vlc3QgJiYgdGlsZUxheWVySW5mbz8uaWQpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oZ3Vlc3RTdHlsZUtleSwgdGlsZUxheWVySW5mby5pZCk7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1NhdmVkIGd1ZXN0IG1hcCBzdHlsZSBJRCB0byBzZXNzaW9uU3RvcmFnZTonLCB0aWxlTGF5ZXJJbmZvLmlkKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBndWVzdCBtYXAgc3R5bGUgSUQgdG8gc2Vzc2lvblN0b3JhZ2UnLCBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBEZXBlbmRlbmNpZXM6IFJ1biB3aGVuIGd1ZXN0IHN0YXR1cyBjaGFuZ2VzIG9yIHRoZSB0aWxlTGF5ZXJJbmZvIHByb3AgY2hhbmdlc1xyXG4gICAgfSwgW2lzR3Vlc3QsIHRpbGVMYXllckluZm9dKTtcclxuXHJcbiAgICAvLyBEYXRhIGZldGNoaW5nIGxvZ2ljIChLZWVwIGV4aXN0aW5nIHVzZUVmZmVjdClcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZmV0Y2hNYXBEYXRhID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgIHNldEVycm9yKG51bGwpO1xyXG4gICAgICAgICAgICBzZXRNYXJrZXJzKFtdKTtcclxuICAgICAgICAgICAgc2V0Rm9vdHByaW50cyhbXSk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgnL2FwaS9tYXBkYXRhJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBNYXJrZXJzXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YT8ubWFya2Vycykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZldGNoZWRNYXJrZXJzOiBNYXBNYXJrZXJEYXRhW10gPSByZXNwb25zZS5kYXRhLm1hcmtlcnMubWFwKChtOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogbS5wb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBDb250ZW50OiBtLnBvcHVwQ29udGVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBtLnNvdXJjZSxcclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TWFya2VycyhmZXRjaGVkTWFya2Vycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBTdWNjZXNzZnVsbHkgZmV0Y2hlZCAke2ZldGNoZWRNYXJrZXJzLmxlbmd0aH0gbWFya2Vycy5gKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCJObyBtYXJrZXIgZGF0YSBmb3VuZCBpbiByZXNwb25zZS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TWFya2VycyhbXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBGb290cHJpbnRzXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YT8uZm9vdHByaW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZldGNoZWRGb290cHJpbnRzOiBNYXBGb290cHJpbnREYXRhW10gPSByZXNwb25zZS5kYXRhLmZvb3RwcmludHMuZmlsdGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoZjogYW55KSA9PiBmLnR5cGUgPT09IFwiRmVhdHVyZVwiICYmIGYuZ2VvbWV0cnk/LnR5cGUgPT09IFwiUG9seWdvblwiICYmIEFycmF5LmlzQXJyYXkoZi5nZW9tZXRyeS5jb29yZGluYXRlcylcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEZvb3RwcmludHMoZmV0Y2hlZEZvb3RwcmludHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgU3VjY2Vzc2Z1bGx5IGZldGNoZWQgJHtmZXRjaGVkRm9vdHByaW50cy5sZW5ndGh9IGZvb3RwcmludHMuYCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihcIk5vIGZvb3RwcmludCBkYXRhIGZvdW5kIGluIHJlc3BvbnNlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgc2V0Rm9vdHByaW50cyhbXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhPy5tYXJrZXJzICYmICFyZXNwb25zZS5kYXRhPy5mb290cHJpbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgdGhpcyBjaGVjaywgYnV0IG1heWJlIHNvZnRlbiB0aGUgZXJyb3IgaWYgb25lIHR5cGUgZXhpc3RzIGJ1dCBub3QgdGhlIG90aGVyXHJcbiAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKFwiTm8gbWFya2VyIG9yIGZvb3RwcmludCBkYXRhIGZvdW5kIGluIHJlc3BvbnNlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvciBlbXB0eSBkYXRhIGZvcm1hdCByZWNlaXZlZCBmcm9tIC9hcGkvbWFwZGF0YVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBtYXAgZGF0YTonLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoZXJyLm1lc3NhZ2UgfHwgJ0NvdWxkIG5vdCBsb2FkIG1hcCBkYXRhLicpO1xyXG4gICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZldGNoTWFwRGF0YSgpO1xyXG4gICAgfSwgW10pO1xyXG5cclxuICAgIC8vIFJFTU9WRUQ6IEludGVybmFsIHRoZW1lIHN0YXRlIChpc0RhcmtNb2RlKSBhbmQgdG9nZ2xlIGJ1dHRvblxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBzdHlsZT17eyBmbGV4R3JvdzogMSwgcG9zaXRpb246ICdyZWxhdGl2ZScsIHdpZHRoOiAnMTAwJScsIGhlaWdodDogJzEwMCUnIH19PlxyXG4gICAgICAgICAgICAge3R5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIChcclxuICAgICAgICAgICAgICAgIDxNYXBDb250YWluZXJcclxuICAgICAgICAgICAgICAgICAgICBjZW50ZXI9e2RlZmF1bHRDZW50ZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgem9vbT17ZGVmYXVsdFpvb219XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsV2hlZWxab29tPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgIHpvb21Db250cm9sPXtmYWxzZX0gLy8gS2VlcCBkZWZhdWx0IGNvbnRyb2xzIGRpc2FibGVkXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiAnMTAwJScsIHdpZHRoOiAnMTAwJScgfX1cclxuICAgICAgICAgICAgICAgICAgICAvLyBBc3NpZ24gdGhlIG1hcCBpbnN0YW5jZSB1c2luZyB0aGUgcmVmIHByb3BcclxuICAgICAgICAgICAgICAgICAgICByZWY9e21hcFJlZn1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICB7LyogT3BlbmluZyB0YWcgZml4ZWQgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgey8qIFVzZSB0aGUgVGlsZUxheWVyIGluZm8gcGFzc2VkIHZpYSBwcm9wcyAqL31cclxuICAgICAgICAgICAgICAgICAgICA8VGlsZUxheWVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17dGlsZUxheWVySW5mby51cmx9IC8vIEFkZCBrZXkgdG8gZm9yY2UgcmUtcmVuZGVyIG9uIFVSTCBjaGFuZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRpb249e3RpbGVMYXllckluZm8uYXR0cmlidXRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybD17dGlsZUxheWVySW5mby51cmx9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgey8qIEtlZXAgZXhpc3RpbmcgbG9hZGluZy9lcnJvciBpbmRpY2F0b3JzIGFuZCBtYXJrZXIvZm9vdHByaW50IHJlbmRlcmluZyAqL31cclxuICAgICAgICAgICAgICAgICAgICB7aXNMb2FkaW5nICYmIDxwPkxvYWRpbmcgbWFwIGRhdGEuLi48L3A+fVxyXG4gICAgICAgICAgICAgICAgICAgIHtlcnJvciAmJiA8cCBzdHlsZT17eyBjb2xvcjogJ3JlZCcgfX0+RXJyb3I6IHtlcnJvcn08L3A+fVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7IWlzTG9hZGluZyAmJiBtYXJrZXJzLm1hcCgobWFya2VyKSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxNYXJrZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17bWFya2VyLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb249e21hcmtlci5wb3NpdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb249e2dldEljb25Gb3JTb3VyY2UobWFya2VyLnNvdXJjZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3B1cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bWFya2VyLnBvcHVwQ29udGVudH0gPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNtYWxsPlNvdXJjZToge21hcmtlci5zb3VyY2UgfHwgJ1Vua25vd24nfTwvc21hbGw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcHVwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L01hcmtlcj5cclxuICAgICAgICAgICAgICAgICAgICApKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeyFpc0xvYWRpbmcgJiYgZm9vdHByaW50cy5tYXAoKGZvb3RwcmludCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3NpdGlvbnMgPSBmb290cHJpbnQuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0ubWFwKGNvb3JkID0+IFtjb29yZFsxXSwgY29vcmRbMF1dIGFzIFtudW1iZXIsIG51bWJlcl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2VuZUlkID0gZm9vdHByaW50LnByb3BlcnRpZXMuc2NlbmVfaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBmb290cHJpbnQucHJvcGVydGllcy5uYW1lIHx8IGBTY2VuZSAke3NjZW5lSWR9YDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9seWdvbiBrZXk9e3NjZW5lSWR9IHBhdGhPcHRpb25zPXt7IGNvbG9yOiAncHVycGxlJyB9fSBwb3NpdGlvbnM9e3Bvc2l0aW9uc30+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcHVwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXNzZXJhY3QgRm9vdHByaW50OiB7bmFtZX0gPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNjZW5lIElEOiB7c2NlbmVJZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcHVwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb2x5Z29uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgPC9NYXBDb250YWluZXI+XHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIHsvKiBOZXcgT3ZlcmxheSBDb250YWluZXIgZm9yIENvbnRyb2xzICovfVxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLm1hcENvbnRyb2xzT3ZlcmxheX0+XHJcbiAgICAgICAgICAgICAgICA8RmlsdGVyQnV0dG9ucyAvPlxyXG4gICAgICAgICAgICAgICAgPFNlYXJjaEJhciAvPiB7LyogQXNzdW1pbmcgU2VhcmNoQmFyIHRha2VzIG5vIHByb3BzIGZvciBub3cgKi99XHJcbiAgICAgICAgICAgICAgICA8Q29udGV4dFdpbmRvd1BsYWNlaG9sZGVyIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxufTtcclxuXHJcbi8vIEtlZXAgbG9nZ2VyIGluc3RhbmNlXHJcbmNvbnN0IGxvZ2dlciA9IHtcclxuICAgIGVycm9yOiAoLi4uYXJnczogYW55W10pID0+IGNvbnNvbGUuZXJyb3IoLi4uYXJncyksXHJcbiAgICBkZWJ1ZzogKC4uLmFyZ3M6IGFueVtdKSA9PiBjb25zb2xlLmxvZyguLi5hcmdzKSxcclxuICAgIHdhcm46ICguLi5hcmdzOiBhbnlbXSkgPT4gY29uc29sZS53YXJuKC4uLmFyZ3MpLFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2hhcmVkTWFwQ29tcG9uZW50OyJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlQXV0aCIsIk1hcENvbnRhaW5lciIsIlRpbGVMYXllciIsIk1hcmtlciIsIlBvcHVwIiwiUG9seWdvbiIsIkwiLCJheGlvcyIsIkZpbHRlckJ1dHRvbnMiLCJTZWFyY2hCYXIiLCJDb250ZXh0V2luZG93UGxhY2Vob2xkZXIiLCJzdHlsZXMiLCJpY29uUmV0aW5hVXJsIiwiaWNvblVybCIsInNoYWRvd1VybCIsIkljb24iLCJEZWZhdWx0IiwicHJvdG90eXBlIiwiX2dldEljb25VcmwiLCJtZXJnZU9wdGlvbnMiLCJzcmMiLCJnZXRJY29uRm9yU291cmNlIiwic291cmNlIiwiaWNvblNpemUiLCJpY29uQW5jaG9yIiwicG9wdXBBbmNob3IiLCJzaGFkb3dTaXplIiwiZGVmYXVsdENlbnRlciIsImRlZmF1bHRab29tIiwiU2hhcmVkTWFwQ29tcG9uZW50IiwidGlsZUxheWVySW5mbyIsIm1hcFJlZiIsIm1hcmtlcnMiLCJzZXRNYXJrZXJzIiwiZm9vdHByaW50cyIsInNldEZvb3RwcmludHMiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwiaXNHdWVzdCIsImd1ZXN0Vmlld3BvcnRLZXkiLCJndWVzdFN0eWxlS2V5IiwiY3VycmVudCIsInNhdmVkVmlld3BvcnRSYXciLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJzYXZlZFZpZXdwb3J0IiwiSlNPTiIsInBhcnNlIiwiY2VudGVyIiwiem9vbSIsInNldFZpZXciLCJsb2dnZXIiLCJkZWJ1ZyIsImUiLCJyZW1vdmVJdGVtIiwibWFwIiwic2F2ZVZpZXdwb3J0U3RhdGUiLCJnZXRDZW50ZXIiLCJnZXRab29tIiwidmlld3BvcnRUb1NhdmUiLCJsYXQiLCJsbmciLCJzZXRJdGVtIiwic3RyaW5naWZ5Iiwib24iLCJvZmYiLCJpZCIsImZldGNoTWFwRGF0YSIsInJlc3BvbnNlIiwiZ2V0IiwiZGF0YSIsImZldGNoZWRNYXJrZXJzIiwibSIsInBvc2l0aW9uIiwicG9wdXBDb250ZW50IiwibGVuZ3RoIiwid2FybiIsImZldGNoZWRGb290cHJpbnRzIiwiZmlsdGVyIiwiZiIsInR5cGUiLCJnZW9tZXRyeSIsIkFycmF5IiwiaXNBcnJheSIsImNvb3JkaW5hdGVzIiwiZXJyIiwibWVzc2FnZSIsImRpdiIsInN0eWxlIiwiZmxleEdyb3ciLCJ3aWR0aCIsImhlaWdodCIsInNjcm9sbFdoZWVsWm9vbSIsInpvb21Db250cm9sIiwicmVmIiwiYXR0cmlidXRpb24iLCJ1cmwiLCJwIiwiY29sb3IiLCJtYXJrZXIiLCJpY29uIiwiYnIiLCJzbWFsbCIsImZvb3RwcmludCIsInBvc2l0aW9ucyIsImNvb3JkIiwic2NlbmVJZCIsInByb3BlcnRpZXMiLCJzY2VuZV9pZCIsIm5hbWUiLCJwYXRoT3B0aW9ucyIsImNsYXNzTmFtZSIsIm1hcENvbnRyb2xzT3ZlcmxheSIsImFyZ3MiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/map/SharedMapComponent.tsx\n");

/***/ })

};
;